(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{42:function(e,t,r){e.exports=r(87)},86:function(e,t,r){},87:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),s=r(25),c=r(14),i=r(15),o=r(12),u=r(38),p=r(10),l=r(6),m=r(1),f=r.n(m),h=r(4),d={memory:Object.seal(new Array(106).fill(0)),registers:Object.seal(new Array(3).fill(0)),pc:0,running:!1,painting:new Array(20).fill(0),width:0,height:0};function b(e,t,r){return e.map(function(e,n){return n===t?r:e})}var y=Object(o.c)({cpu:function(){var e,t,r,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,s=arguments.length>1?arguments[1]:void 0,c=a.registers,i=a.pc+1;switch(s.type){case"ADD":return t=s.payload.Ri-1,r=s.payload.Rj-1,n=s.payload.Rk-1,e=c[t]+c[r],Object(l.a)({},a,{registers:b(c,n,e),pc:i});case"SUB":return t=s.payload.Ri-1,r=s.payload.Rj-1,n=s.payload.Rk-1,e=c[t]-c[r],Object(l.a)({},a,{registers:b(c,n,e),pc:i});case"SET":return t=s.payload.Ri-1,e=s.payload.value,Object(l.a)({},a,{registers:b(c,t,e),pc:i});case"MOVE":return t=s.payload.Ri-1,r=s.payload.Rj-1,Object(l.a)({},a,{registers:b(c,r,c[t]),pc:i});case"GOTO":return i=s.payload.Mi,Object(l.a)({},a,{pc:i});case"COND_GOTO":return t=s.payload.Ri-1,r=s.payload.Rj-1,c[t]>c[r]&&(i=s.payload.Mi),Object(l.a)({},a,{pc:i});case"OR":return e=c[s.payload.Ri-1]|c[s.payload.Rj-1],Object(l.a)({},a,{registers:b(c,s.payload.Rk-1,e),pc:i});case"LOAD":return Object(l.a)({},a,{registers:b(c,s.payload.Ri-1,a.memory[s.payload.Mi]),pc:i});case"WRITE":return Object(l.a)({},a,{memory:b(a.memory,s.payload.Mi,c[s.payload.Ri-1]),pc:i});case"TOGGLE":return Object(l.a)({},a,{running:!a.running});case"MOVE_PRINTER":return Object(l.a)({},a,{memory:b(a.memory,s.payload.index,s.payload.value)});case"PAINT":var o=a.painting;return a.memory[103]&&console.log("Painting: ",a.memory[103],a.memory[102],b(o,a.memory[102],a.memory[103])),Object(l.a)({},a,{painting:b(o,a.memory[102],a.memory[103])});case"INIT":var u=parseInt(s.payload.height),p=parseInt(s.payload.width),m=new Array(u*p).fill(0);return Object(l.a)({},a,{painting:m,width:p,height:u,colors:s.payload.colors});case"RESET":return d;default:return a}}}),O=p.a(),v=[u.a,Object(i.routerMiddleware)(O)],g=o.d.apply(void 0,[o.a.apply(void 0,v)].concat([])),R=Object(o.e)(Object(i.connectRouter)(O)(y),{},g),x=r(16),E=r(39),k=r(19),w=r(17),j=r(13),T=r(18),M=(r(24),r(40)),I=r.n(M),C=(r(34),r(72),function(e){function t(){var e;return Object(x.a)(this,t),(e=Object(k.a)(this,Object(w.a)(t).call(this))).$rules={start:[{token:"constant.character.hexadecimal.assembly",regex:"\\b(?:goto|cond_goto|move|set|add|sub|load|write|or)",caseInsensitive:!0},{token:"variable.parameter.register.assembly",regex:"\\b(?:R1|R2|R3)",caseInsensitive:!0},{token:"constant.character.decimal.assembly",regex:"\\b[0-9]+\\b"},{token:"support.function.directive.assembly",regex:"\\b(?:M[(0-9)]*)",caseInsensitive:!0},{token:"string.assembly",regex:/'([^\\']|\\.)*'/},{token:"string.assembly",regex:/"([^\\"]|\\.)*"/},{token:"comment.assembly",regex:";.*$"}]},e}return Object(T.a)(t,e),t}(window.ace.acequire("ace/mode/text_highlight_rules").TextHighlightRules)),N=function(e){function t(){var e;return Object(x.a)(this,t),(e=Object(k.a)(this,Object(w.a)(t).call(this))).HighlightRules=C,e}return Object(T.a)(t,e),t}(window.ace.acequire("ace/mode/assembly_x86").Mode),S=r(11),D=r.n(S),L="SET R1 5\nWRITE R1 M101\nLOAD M102 R2\nCOND_GOTO R1 R3 M2\nSET R1 1 //color red\nWRITE R1 M103 //paint red\nLOAD M104 R3 //get current thickness value\nCOND_GOTO R2 R3 M8 //if desired > current, go to last one\nSET R1 0\nWRITE R1 M103\nSET R1 15\nWRITE R1 M101\nLOAD M102 R2\nCOND_GOTO R1 R2 M12\nSET R1 2 //color green\nSET R2 1 //desired thickness value\nWRITE R1 M103 //paint green\nLOAD M104 R3 //get current thickness value\nSET R1 0\nWRITE R1 M103\nSET R1 20\nWRITE R1 M101\n",G=function(e){function t(){var e;return Object(x.a)(this,t),(e=Object(k.a)(this,Object(w.a)(t).call(this))).state={value:L||""},e.interpreter=e.interpreter.bind(Object(j.a)(e)),e.unclean=e.unclean.bind(Object(j.a)(e)),e.aceEditor=a.a.createRef(),e.xInput=a.a.createRef(),e.yInput=a.a.createRef(),e.renderGrid=e.renderGrid.bind(Object(j.a)(e)),e.getColor=e.getColor.bind(Object(j.a)(e)),e}return Object(T.a)(t,e),Object(E.a)(t,[{key:"unclean",value:function(e){var t=e.toLowerCase().split(" "),r=t[0];switch(t.shift(),r){case"ADD":if(3!=t.length)return"invalid # of params";if(!t[0].startsWith("r")||!t[1].startsWith("r")||!t[2].startsWith("r"))return"invalid params"}}},{key:"interpreter",value:function(){var e=Object(h.a)(f.a.mark(function e(t){var r,n,a,s,c,i;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.toggle();case 2:r=this.state.value.toLowerCase().split("\n");case 3:if(!this.props.cpu.running){e.next=71;break}n=this.props.cpu.pc;case 5:if(!(n<r.length&&this.props.cpu.running)){e.next=69;break}a=r[n],(s=a.indexOf(";"))>-1&&(a=a.substring(0,s)),a=a.trim(),c=a.split(" "),i=c[0],c.shift(),c=c.map(function(e){return e.startsWith("r")?Number(e.substring(1,2)):e.startsWith("m")?Number(e.substring(1,e.length)):Number(e)}),"GOTO"===i.toUpperCase()?this.refs.aceEditor.editor.gotoLine(c[0]):"COND_GOTO"===i.toUpperCase()?this.refs.aceEditor.editor.gotoLine(this.props.cpu.registers[c[0]]>this.props.cpu.registers[c[1]]?c[2]:this.props.cpu.pc+2):this.refs.aceEditor.editor.gotoLine(this.props.cpu.pc+1),this.refs.aceEditor.editor.execCommand("gotolineend"),e.t0=i.toUpperCase(),e.next="ADD"===e.t0?19:"SUB"===e.t0?22:"SET"===e.t0?25:"MOVE"===e.t0?28:"GOTO"===e.t0?31:"COND_GOTO"===e.t0?34:"OR"===e.t0?37:"LOAD"===e.t0?40:"WRITE"===e.t0?43:46;break;case 19:return e.next=21,this.props.add(c[0].substring(1,1),c[1].substring(1,1),c[2].substring(1,1));case 21:return e.abrupt("break",48);case 22:return e.next=24,this.props.sub(c[0],c[1],c[2]);case 24:return e.abrupt("break",48);case 25:return e.next=27,this.props.set(c[0],c[1]);case 27:return e.abrupt("break",48);case 28:return e.next=30,this.props.move(c[0],c[1]);case 30:return e.abrupt("break",48);case 31:return e.next=33,this.props.goto(c[0]);case 33:return e.abrupt("break",48);case 34:return e.next=36,this.props.cond_goto(c[0],c[1],c[2]);case 36:return e.abrupt("break",48);case 37:return e.next=39,this.props.or(c[0],c[1],c[2]);case 39:return e.abrupt("break",48);case 40:return e.next=42,this.props.load(c[0],c[1]);case 42:return e.abrupt("break",48);case 43:return e.next=45,this.props.write(c[0],c[1]);case 45:return e.abrupt("break",48);case 46:return e.abrupt("return");case 48:if(!t){e.next=52;break}return e.next=51,this.props.toggle();case 51:return e.abrupt("return");case 52:if(!(this.props.cpu.memory[101]<this.props.cpu.memory[102])){e.next=57;break}return e.next=55,this.props.movePrinter(102,this.props.cpu.memory[102]-1);case 55:e.next=64;break;case 57:if(!(this.props.cpu.memory[101]>this.props.cpu.memory[102])){e.next=62;break}return e.next=60,this.props.movePrinter(102,this.props.cpu.memory[102]+1);case 60:e.next=64;break;case 62:return e.next=64,this.props.movePrinter(102,this.props.cpu.memory[102]);case 64:return e.next=66,this.sleep(800);case 66:n++,e.next=5;break;case 69:e.next=3;break;case 71:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"sleep",value:function(e){return new Promise(function(t){return setTimeout(t,e)})}},{key:"componentDidMount",value:function(){var e=Object(h.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new N,this.refs.aceEditor.editor.getSession().setMode(t),e.next=4,this.props.init(this.refs.xInput?this.refs.xInput.value:2,this.refs.yInput?this.refs.yInput.value:10);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(h.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.reset();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getColor",value:function(e){var t=this.props.cpu.painting[e];return 0===t?"white":1===t?"red":2===t?"green":3===t?"blue":"white"}},{key:"renderGrid",value:function(){if(!(this.props.cpu.painting.length<2)){for(var e="<table>",t=0;t<this.props.cpu.height;t++){e+="<tr>";for(var r=0;r<this.props.cpu.width;r++)e+=t%2==0?'<td style="background-color: '.concat(this.getColor((t+1)*(r+1)-1),'"> ').concat(t+1*r+1," </td>"):'<td style="background-color: '.concat(this.getColor((t+1)*(r+1)-1),'"> ').concat(this.props.cpu.height*this.props.cpu.width-t*r," </td>");e+="</tr>"}return e+="</table>",a.a.createElement("div",{dangerouslySetInnerHTML:{__html:e}})}}},{key:"render",value:function(){var e=this;return a.a.createElement("div",null,a.a.createElement("header",{style:{width:"100%",backgroundColor:"black",color:"#fff"}},"CS109 Interpreter - by ",a.a.createElement("a",{style:{color:"orange"},href:"https://maxleiter.com"},"Max Leiter")),a.a.createElement("div",{className:"parent"},a.a.createElement("div",{className:"item first"},a.a.createElement("div",{className:"controls"},a.a.createElement("button",{className:"controls-item",onClick:function(){return e.interpreter(!1)}}," Run "),a.a.createElement("button",{className:"controls-item",onClick:function(){return e.interpreter(!0)}}," Step "),a.a.createElement("button",{className:"controls-item",disabled:0===this.props.cpu.pc,onClick:function(){return e.interpreter(!1)}}," ",this.props.cpu.running?"Stop":"Continue"," "),a.a.createElement("button",{className:"controls-item",disabled:0===this.props.cpu.pc,onClick:Object(h.a)(f.a.mark(function t(){var r,n;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.cpu.height,n=e.props.cpu.width,t.next=4,e.props.reset();case 4:return t.next=6,e.props.init(r,n);case 6:case"end":return t.stop()}},t)}))}," Restart ")),a.a.createElement(I.a,{ref:"aceEditor",mode:"assembly_x86",theme:"monokai",value:this.state.value,onChange:function(t){return e.setState({value:t})},name:"aceEditor",editorProps:{$blockScrolling:!0},setOptions:{firstLineNumber:0,maxLines:100,minLines:40,style:{overflowY:"scroll"}}})),a.a.createElement("div",{className:"item last"},a.a.createElement("div",{className:"item-inner"},"Size of image: ",a.a.createElement("input",{ref:"xInput",style:{width:30},defaultValue:2})," x ",a.a.createElement("input",{ref:"yInput",defaultValue:10,style:{width:30}}),a.a.createElement("button",{style:{marginLeft:10},onClick:function(){return e.props.init(e.refs.xInput?e.refs.xInput.value:2,e.refs.yInput?e.refs.yInput.value:10)}}," Render & Reset "),this.renderGrid()),a.a.createElement("pre",null,"PC: M",this.props.cpu.pc," ",a.a.createElement("br",null),"M101: ",a.a.createElement(D.a,{inline:!0,text:this.props.cpu.memory[101]}),"              R1: ",a.a.createElement(D.a,{inline:!0,text:this.props.cpu.registers[0]}),"  ",a.a.createElement("br",null),"M102: ",a.a.createElement(D.a,{inline:!0,text:this.props.cpu.memory[102]}),"              R2: ",a.a.createElement(D.a,{inline:!0,text:this.props.cpu.registers[1]}),"  ",a.a.createElement("br",null),"M103: ",a.a.createElement(D.a,{inline:!0,text:this.props.cpu.memory[103]}),"              R3: ",a.a.createElement(D.a,{inline:!0,text:this.props.cpu.registers[2]}),"  ",a.a.createElement("br",null),"M104: ",a.a.createElement(D.a,{inline:!0,text:this.props.cpu.memory[104]}),"  ",a.a.createElement("br",null),"M105: ",a.a.createElement(D.a,{inline:!0,text:this.props.cpu.memory[105]}),"  ",a.a.createElement("br",null),a.a.createElement("br",null)),a.a.createElement("label",null," Memory: ")," ",a.a.createElement("br",null),a.a.createElement("p",{style:{fontFamily:"monospace"}},this.props.cpu.memory.map(function(e,t,r){return t===r.length-1?"".concat(e):"".concat(e,", ")})))))}}]),t}(a.a.Component),_=Object(c.connect)(function(e){return{cpu:e.cpu}},{add:function(e,t,r){return function(){var n=Object(h.a)(f.a.mark(function n(a){return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a({type:"ADD",payload:{Ri:e,Rj:t,Rk:r}});case 1:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},sub:function(e,t,r){return function(){var n=Object(h.a)(f.a.mark(function n(a){return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a({type:"SUB",payload:{Ri:e,Rj:t,Rk:r}});case 1:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},set:function(e,t){return function(){var r=Object(h.a)(f.a.mark(function r(n){return f.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n({type:"SET",payload:{Ri:e,value:t}});case 1:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()},move:function(e,t){return function(){var r=Object(h.a)(f.a.mark(function r(n){return f.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n({type:"MOVE",payload:{Ri:e,Rj:t}});case 1:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()},goto:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(r){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r({type:"GOTO",payload:{Mi:e}});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},cond_goto:function(e,t,r){return function(){var n=Object(h.a)(f.a.mark(function n(a){return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a({type:"COND_GOTO",payload:{Ri:e,Rj:t,Mi:r}});case 1:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},or:function(e,t,r){return function(){var n=Object(h.a)(f.a.mark(function n(a){return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a({type:"OR",payload:{Ri:e,Rj:t,Rk:r}});case 1:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},load:function(e,t){return function(){var r=Object(h.a)(f.a.mark(function r(n){return f.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n({type:"LOAD",payload:{Mi:e,Ri:t}});case 1:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()},write:function(e,t){return function(){var r=Object(h.a)(f.a.mark(function r(n){return f.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n({type:"WRITE",payload:{Ri:e,Mi:t}});case 1:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()},toggle:function(){return function(){var e=Object(h.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"TOGGLE"});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},movePrinter:function(e,t){return function(){var r=Object(h.a)(f.a.mark(function r(n){return f.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n({type:"PAINT"});case 2:return r.next=4,n({type:"MOVE_PRINTER",payload:{index:e,value:t}});case 4:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()},init:function(e,t,r){return function(){var r=Object(h.a)(f.a.mark(function r(n){return f.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n({type:"INIT",payload:{height:e,width:t}});case 1:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()},reset:function(){return function(){var e=Object(h.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({type:"RESET"});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}})(G),A=(r(85),r(86),document.querySelector("#root"));Object(s.render)(a.a.createElement(c.Provider,{store:R},a.a.createElement(i.ConnectedRouter,{history:O},a.a.createElement("div",null,a.a.createElement(_,null)))),A)}},[[42,1,2]]]);
//# sourceMappingURL=main.3b2e03e2.chunk.js.map